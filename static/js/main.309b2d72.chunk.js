(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{227:function(e,t,a){},233:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a(0),c=a.n(r),s=a(39),i=a.n(s),o=(a(227),a(23)),l=a(164),d=(a(230),a(231),a(232),c.a.createContext(null));l.a.initializeApp({apiKey:"AIzaSyDPo5PSCF9eUt4ON2138vysh51XkXSw8kI",authDomain:"capstone-a3162.firebaseapp.com",databaseURL:"https://capstone-a3162.firebaseio.com",projectId:"capstone-a3162",storageBucket:"capstone-a3162.appspot.com",messagingSenderId:"790078530679",appId:"1:790078530679:web:31992822744e93cc255272",measurementId:"G-SY924H3Z4Y"});var u=function(e){var t=e.children,a=Object(r.useState)(l.a),c=Object(o.a)(a,1)[0];return Object(n.jsx)(d.Provider,{value:c,children:t})},j=function(){return Object(r.useContext)(d)},b=a(24),m=a.n(b),h=a(45),p=Object(r.createContext)(null),O=function(e){var t=e.children,a=Object(r.useState)(null),c=Object(o.a)(a,2),s=c[0],i=c[1],l=Object(r.useState)(!0),d=Object(o.a)(l,2),u=d[0],b=d[1],O=j();return Object(r.useEffect)((function(){O.auth().onAuthStateChanged(function(){var e=Object(h.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t.getIdTokenResult();case 3:a=e.sent,n=a.claims.role,i({user:t,role:n});case 6:b(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.jsx)(p.Provider,{value:{user:s,setUser:i,loading:u},children:t})},x=function(){return Object(r.useContext)(p)},f=a(215),g=a(52),y=a(405),v=a(398),I=a(406),k=a(401),w=a(400),S=a(396),C=a(394),A=a(395),N=a(98),E=a(402),T=a(204),P=a(407),F=(a(233),a(42)),B=a(116),q=a(397),D=a(403),H=(B.a.Option,q.a.RangePicker),z=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(null),i=Object(o.a)(s,2),l=i[0],d=i[1],u=Object(r.useState)(!0),b=Object(o.a)(u,2),p=b[0],O=b[1],f=Object(r.useState)(null),C=Object(o.a)(f,2),A=C[0],N=(C[1],Object(r.useState)(!1)),E=Object(o.a)(N,2),T=E[0],P=E[1],F=Object(r.useState)(!1),B=Object(o.a)(F,2),q=B[0],z=B[1],L=Object(r.useState)(null),U=Object(o.a)(L,2),R=(U[0],U[1],v.a.useForm()),M=Object(o.a)(R,1)[0],G=x().user,J=j().storage(),$=function(){P(!1),d(null)};function K(e){return e.charAt(0).toUpperCase()+e.slice(1)}var V=function(){var e=Object(h.a)(m.a.mark((function e(t){var n,r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),P(!1),e.next=5,G.user.getIdToken(!0);case 5:return n=e.sent,e.next=8,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/approve/".concat(l.id),{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)});case 8:if((r=e.sent).ok){e.next=14;break}return e.next=12,r.json();case 12:throw s=e.sent,new Error(s.message);case 14:(i=a)[q].approved=!0,c(i),k.b.success("Approved."),O(!1),z(null),d(null),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),O(!1),k.b.error(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)(Object(h.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/students",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.filter((function(e){return void 0!==e.acceptedBy})).map((function(e,t){var a,n;return n=null===(a=e.form)||void 0===a?void 0:a.snapshots.map(function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.ref(t.path).getDownloadURL();case 2:return a=e.sent,e.abrupt("return",{url:a,name:t.name});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),{key:t,id:K(e.hctId),email:"".concat(K(e.hctId),"@HCT.AC.AE"),name:K(e.name),acceptedBy:e.acceptedBy,approved:e.approved,form:e.form,docuemnts:n}})),console.log(n),c(n),O(!1);case 10:case"end":return e.stop()}}),e)}))),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Approve Students"}),A&&Object(n.jsx)(y.a,{message:"Error",description:A,type:"error",showIcon:!0}),Object(n.jsx)(S.a,{expandable:{expandedRowRender:function(e,t){return console.log(e.form.companies.length),Object(n.jsxs)("p",{style:{margin:0},children:[Object(n.jsx)("b",{children:"Major:"})," ",e.form.major,Object(n.jsx)("br",{}),Object(n.jsx)("b",{children:"Number Phone:"})," ",e.form.numberPhone,Object(n.jsx)("br",{}),Object(n.jsx)("b",{children:"Program:"})," ",e.form.program,Object(n.jsx)("br",{}),Object(n.jsx)("b",{children:"Sponsered:"})," ",e.form.sponsored?"Yes":"Not",Object(n.jsx)("br",{}),Object(n.jsx)("b",{children:"Companies:"})," ",0===e.form.companies.length?"Not Choose":Object(n.jsx)("ul",{style:{background:"grey",margin:0,marginBottom:"5px",padding:0},children:e.form.companies.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("b",{children:e.comapnyName})}),Object(n.jsx)("div",{children:e.email}),Object(n.jsx)("div",{children:e.contactNumber})]})}))}),Object(n.jsx)("br",{})]})},rowExpandable:function(e){return void 0!==e.form}},columns:[{title:"HCT ID",dataIndex:"id",key:"id",render:function(e){return Object(n.jsx)("a",{children:e})}},{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(n.jsx)("a",{children:e})}},{title:"Email",dataIndex:"email",key:"email"},{title:"Action",dataIndex:"action",key:"action",render:function(e,t,a){t.id,t.acceptedBy;return t.approved?Object(n.jsx)(I.b,{size:"middle",children:Object(n.jsx)(g.a,{disabled:!0,children:"Approved"})}):void 0===t.form?Object(n.jsx)(I.b,{size:"middle",children:Object(n.jsx)(g.a,{disabled:!0,children:"Doesn't submit yet"})}):Object(n.jsx)(I.b,{size:"middle",children:Object(n.jsx)(g.a,{disabled:!!t.approved,onClick:function(){d(t),P(!0),z(a)},children:t.approved?"Approved":"Approve"})})}}],loading:p,dataSource:a,pagination:!1}),l&&Object(n.jsx)(D.a,{title:"Approve Student ".concat(l.name," (").concat(l.id,")"),width:720,onClose:$,visible:T,bodyStyle:{paddingBottom:80},footer:Object(n.jsxs)("div",{style:{textAlign:"right"},children:[Object(n.jsx)(g.a,{onClick:$,style:{marginRight:8},children:"Cancel"}),Object(n.jsx)(g.a,{onClick:function(){M.submit()},type:"primary",loading:p,children:"Submit"})]}),children:Object(n.jsxs)(v.a,{layout:"vertical",onFinish:V,form:M,hideRequiredMark:!0,children:[Object(n.jsx)(v.a.Item,{label:"Work Placement Date",name:"date",rules:[{required:!0}],children:Object(n.jsx)(H,{})}),Object(n.jsx)(v.a.Item,{label:"Additional Information",name:"info",children:Object(n.jsx)(w.a.TextArea,{})})]})})]})},L=function(){var e=x().user,t=function(){var t=Object(h.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.user.getIdToken(!0);case 2:return a=t.sent,t.next=5,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/resend",{method:"GET",headers:{Authorization:"Bearer ".concat(a)}});case 5:return n=t.sent,t.t0=console,t.next=9,n.json();case 9:t.t1=t.sent,t.t0.log.call(t.t0,t.t1);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.jsx)(g.a,{type:"link",style:{fontWeight:"bold"},onClick:t,children:"resend"})},U=function(){return x().user.user.emailVerified?null:Object(n.jsx)(y.a,{message:"Verify your account",closable:!0,style:{width:"100%"},description:Object(n.jsxs)("div",{children:["You are not allowed to do any operations expect editing your profile until you verify your account through the email sent",Object(n.jsx)("br",{}),Object(n.jsx)(L,{})]}),type:"warning",showIcon:!0})},R=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!0),i=Object(o.a)(s,2),l=i[0],d=i[1],u=x().user,j=v.a.useForm(),b=Object(o.a)(j,1)[0],p=Object(r.useState)(null),O=Object(o.a)(p,2),C=O[0],A=O[1],N=[{title:"HCT ID",dataIndex:"id",key:"id",render:function(e){return Object(n.jsx)("a",{children:e})}},{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(n.jsx)("a",{children:e})}},{title:"Email",dataIndex:"email",key:"email"},{title:"Status",dataIndex:"status",key:"status"},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){var r=t.id,s=t.acceptedBy;return Object(n.jsx)(I.b,{size:"middle",children:Object(n.jsx)(g.a,{disabled:!!s,onClick:Object(h.a)(m.a.mark((function e(){var n,s,i,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.user.getIdToken(!0);case 3:return n=e.sent,console.log({hctId:r}),e.next=7,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/students/".concat(r),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)},body:JSON.stringify({hctId:r})});case 7:if((s=e.sent).ok){e.next=15;break}return e.next=11,s.json();case 11:throw i=e.sent,o=i.message,console.log(o),new Error(o);case 15:l=a.filter((function(e){return e.id!==r})),k.b.success("Student ".concat(t.name," (").concat(t.id,") has been deleted successfully")),c(l),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),k.b.error("Failed to delete student ".concat(t.name," (").concat(t.id,")"));case 23:case"end":return e.stop()}}),e,null,[[0,20]])}))),children:"Delete"})})}}];function E(e){return e.charAt(0).toUpperCase()+e.slice(1)}Object(r.useEffect)(Object(h.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/students?createdBy=".concat(u.user.uid),{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.map((function(e){return{id:E(e.hctId),email:"".concat(E(e.hctId),"@HCT.AC.AE"),name:E(e.name),status:e.acceptedBy?"Accepted":"Under Progress"}})),c(n),d(!1);case 9:case"end":return e.stop()}}),e)}))),[]);var T=function(){var e=Object(h.a)(m.a.mark((function e(t){var n,r,s,i,o,l,d,j,h,p,O;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id,r=t.fname,s=t.lname,i="H00".concat(n),o="".concat(E(r)," ").concat(E(s)),l="Under Progress",d="".concat(i,"@HCT.AC.AE"),e.next=8,u.user.getIdToken(!0);case 8:return j=e.sent,e.next=11,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/students",{method:"POST",headers:{Authorization:"Bearer ".concat(j)},body:JSON.stringify({hctId:i,name:o})});case 11:if((h=e.sent).ok){e.next=18;break}return e.next=15,h.json();case 15:throw p=e.sent,O=p.message,new Error(O);case 18:c([{id:i,name:o,status:l,email:d}].concat(Object(f.a)(a))),b.resetFields(),A(!1),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),A(e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[C?Object(n.jsx)(y.a,{message:"Error",description:C,type:"error",showIcon:!0}):null,Object(n.jsxs)(v.a,{name:"addStudent",onFinish:T,form:b,children:[Object(n.jsx)(v.a.Item,{label:"HCT ID",name:"id",rules:[{max:6,message:"ID must be 6 characters"},{min:6,message:"ID must be 6 characters"},{pattern:/^\d+$/g,message:"ID must be number"},{required:!0,message:"ID is required"}],children:Object(n.jsx)(w.a,{addonBefore:"H00"})}),Object(n.jsx)(v.a.Item,{label:"First Name",name:"fname",rules:[{required:!0,message:"First Name is required"},{pattern:/^[a-zA-Z]+$/g,message:"Frist Name must be alphaphbet character only"}],children:Object(n.jsx)(w.a,{})}),Object(n.jsx)(v.a.Item,{label:"Last Name",name:"lname",rules:[{required:!0,message:"Last Name is required"},{pattern:/^[a-zA-Z]+$/g,message:"Last Name must be alphaphbet character only"}],children:Object(n.jsx)(w.a,{})}),Object(n.jsx)(v.a.Item,{children:Object(n.jsx)(g.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"ADD"})})]})]}),Object(n.jsx)(S.a,{columns:N,loading:l,dataSource:a,pagination:!1})]})},M=function(){x().user;return Object(n.jsx)("div",{children:Object(n.jsx)(R,{})})},G=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!0),i=Object(o.a)(s,2),l=i[0],d=i[1],u=x().user,j=v.a.useForm(),b=(Object(o.a)(j,1)[0],Object(r.useState)(null)),p=Object(o.a)(b,2),O=p[0],f=(p[1],Object(r.useState)([])),w=Object(o.a)(f,2),C=w[0],A=w[1];function N(e){return e.charAt(0).toUpperCase()+e.slice(1)}Object(r.useEffect)(Object(h.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/students",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.filter((function(e){return 1!=e.approved})).map((function(e,t){return{key:t,id:N(e.hctId),email:"".concat(N(e.hctId),"@HCT.AC.AE"),name:N(e.name),acceptedBy:e.acceptedBy}})),c(n),d(!1);case 9:case"end":return e.stop()}}),e)}))),[]);var E=C.length>0,T=function(){var e=Object(h.a)(m.a.mark((function e(){var t,r,c,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,u.user.getIdToken(!0);case 3:return t=e.sent,r=C.map(function(){var e=Object(h.a)(m.a.mark((function e(n){var r,c,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a[n].id,e.next=3,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/accept",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify({hctId:r})});case 3:if((c=e.sent).ok){e.next=10;break}return e.next=7,c.json();case 7:return s=e.sent,i=s.message,e.abrupt("return",{key:n,status:"failed",why:i});case 10:return e.abrupt("return",{key:n,status:"success"});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.all(r);case 7:c=e.sent,s=a,i=[],c.forEach((function(e){var t=e.key;"success"===e.status?s[t].acceptedBy=u.user.uid:i.push({name:a[t].name,id:a[t].id})})),0!==i.length&&k.b.error(Object(n.jsxs)("div",{children:["can't confirm for those students:",Object(n.jsx)("ul",{children:i.map((function(e){var t=e.name,a=e.id;return Object(n.jsx)("li",{children:"".concat(t," (").concat(a,")")})}))})]})),A([]),d(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Accept Students"}),O&&Object(n.jsx)(y.a,{message:"Error",description:O,type:"error",showIcon:!0}),Object(n.jsxs)("div",{style:{marginBottom:16},children:[Object(n.jsx)(g.a,{type:"primary",onClick:T,disabled:!E|l,children:"Confirm"}),Object(n.jsx)("span",{style:{marginLeft:8},children:E?"Selected ".concat(C.length," students"):""})]}),Object(n.jsx)(S.a,{rowSelection:{selectedRowKeys:C,onChange:function(e){console.log("selectedRowKeys changed: ",e),A(e)},getCheckboxProps:function(e){return{disabled:void 0!==e.acceptedBy,name:e.name}}},columns:[{title:"HCT ID",dataIndex:"id",key:"id",render:function(e){return Object(n.jsx)("a",{children:e})}},{title:"Name",dataIndex:"name",key:"name",render:function(e){return Object(n.jsx)("a",{children:e})}},{title:"Email",dataIndex:"email",key:"email"},{title:"Action",dataIndex:"action",key:"action",render:function(e,t,r){var s=t.id,i=t.acceptedBy;return Object(n.jsx)(I.b,{size:"middle",children:Object(n.jsx)(g.a,{disabled:!!i,onClick:Object(h.a)(m.a.mark((function n(){var i,o,l,j,b,h,p;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(!0),console.log(e),n.next=5,u.user.getIdToken(!0);case 5:return i=n.sent,console.log({hctId:s}),n.next=9,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/accept",{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:JSON.stringify({hctId:s})});case 9:if((o=n.sent).ok){n.next=16;break}return n.next=13,o.json();case 13:throw l=n.sent,j=l.message,new Error(j);case 16:b=a.map((function(e){return e.id===s&&(e.acceptedBy=u.user.uid),e})),k.b.success("Student ".concat(t.name," (").concat(t.id,") is confirmed. Email will send to register")),c(b),h=C,console.log("key:",h),console.log("index",r),p=h.filter((function(e){return e!=r})),A(p),d(!1),n.next=31;break;case 27:n.prev=27,n.t0=n.catch(0),console.log(n.t0),k.b.error("Failed to confirm student ".concat(t.name," (").concat(t.id,")"));case 31:case"end":return n.stop()}}),n,null,[[0,27]])}))),children:i?"Confirmed":"Confirm"})})}}],loading:l,dataSource:a,pagination:!1})]})},J=function(){var e=Object(r.useState)("1"),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(C.a,{style:{height:"100%"},children:[Object(n.jsx)(A.a,{style:{marginRight:"10px"},children:Object(n.jsxs)(N.a,{onClick:function(e){c(e.key)},style:{width:256,height:"100%"},defaultOpenKeys:[1],selectedKeys:a,mode:"inline",children:[Object(n.jsx)(N.a.Item,{children:"Accept Students"},"1"),Object(n.jsx)(N.a.Item,{children:"Approve Students"},"2")]})}),Object(n.jsx)(A.a,{style:{padding:"5px"},children:"1"===a?Object(n.jsx)(G,{}):Object(n.jsx)(z,{})})]})})},$=function(){var e=x().user,t=j(),a=Object(F.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("header",{style:{borderBottom:"1px solid rgba(0, 0, 0, .1)",padding:"5px 10px",display:"flex",alignItems:"center"},children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:"https://cdn.hct.ac.ae/Images/E_logo1.png",width:"150"})}),Object(n.jsxs)("div",{style:{marginLeft:"auto"},children:[Object(n.jsxs)("a",{href:"/",children:[Object(n.jsx)(E.a,{size:35,icon:Object(n.jsx)(P.a,{})}),Object(n.jsx)("span",{style:{marginLeft:"10px"},children:e.user.displayName})]}),Object(n.jsx)("button",{onClick:Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.auth().signOut();case 2:a.replace({pathname:"/"});case 3:case"end":return e.stop()}}),e)}))),children:"Log out"})]})]})})},K=function(){var e=x(),t=e.user;if(e.loading)return Object(n.jsx)("div",{children:Object(n.jsx)(T.a,{size:"large"})});if(!t)return Object(n.jsx)(F.a,{to:{pathname:"/",state:{from:{pathname:"/dashboard"}}}});if(t){var a=null;switch(t.role){case"teacher":a=Object(n.jsx)(M,{});break;case"cd":a=Object(n.jsx)(J,{})}return Object(n.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[Object(n.jsx)($,{}),Object(n.jsx)(U,{}),a]})}},V=a(53),Y=a(146),Z=a(399),W=a(404),X=a(117),_=a(408),Q=a(409),ee=a(410),te=a(411),ae=B.a.Option,ne=Z.a.Dragger,re=function(){var e=Object(F.h)().code,t=Object(r.useState)(null),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)(null),l=Object(o.a)(i,2),d=(l[0],l[1]),u=Object(r.useState)(null),b=Object(o.a)(u,2),p=b[0],O=b[1],x=Object(r.useState)(null),f=Object(o.a)(x,2),y=f[0],k=f[1],S=Object(r.useState)(null),C=Object(o.a)(S,2),A=C[0],N=C[1],E=v.a.useForm(),P=Object(o.a)(E,1)[0],q=Object(r.useState)("050"),D=Object(o.a)(q,2),H=D[0],z=D[1],L=j();Object(r.useEffect)(Object(h.a)(m.a.mark((function t(){var a,n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(!0),t.next=4,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/students?code=".concat(e),{method:"GET"});case 4:if((a=t.sent).ok){t.next=7;break}throw new Error;case 7:return t.next=9,a.json();case 9:if(0!==(n=t.sent).length){t.next=12;break}throw new Error;case 12:r=Object(o.a)(n,1),(c=r[0]).form&&O(!0),c.approved&&d(!0),P.setFieldsValue({id:c.hctId,name:c.name}),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.log(t.t0),N(!0);case 22:s(!1);case 23:case"end":return t.stop()}}),t,null,[[0,18]])}))),[]);var U=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r,c,s,i,o,l,d,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(e,t,a){return L.storage().ref().child(a).child(t).put(e)},console.log(a),n=a.cv,r=a.emiratesId,c=a.passport,a.id,a.name,s=a.numberPhone,i=Object(Y.a)(a,["cv","emiratesId","passport","id","name","numberPhone"]),l=[{field:"emiratesId",document:r},{field:"passport",document:c},{field:"cv",document:n}].map((function(e){var t=e.field,a=e.document.file;return o(a,a.name,"documents").then((function(e){var a=e.metadata.fullPath;return{field:t,path:a}}))})),t.next=6,Promise.all(l);case 6:return d=t.sent,console.log(Object(V.a)(Object(V.a)({},i),{},{numberPhone:H+s,snapshots:d,code:e})),t.next=10,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/apply",{method:"POST",body:JSON.stringify(Object(V.a)(Object(V.a)({},i),{},{numberPhone:H+s,snapshots:d,code:e}))});case 10:return u=t.sent,k(!0),t.t0=console,t.next=15,u.json();case 15:t.t1=t.sent,t.t0.log.call(t.t0,"ddd:",t.t1);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c?Object(n.jsx)(T.a,{}):y?Object(n.jsx)(W.a,{status:"success",title:"Registration completed",subTitle:"You will receive an email once approved"}):A?Object(n.jsx)(W.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist."}):p?Object(n.jsx)(W.a,{icon:Object(n.jsx)(_.a,{}),title:"Already submitted",subTitle:"You will be approved soon after validate your information. Just wait our email"}):Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(v.a,{onFinish:U,form:P,initialValues:{program:"CIS",startDate:"30/5/2020",sponsored:!1},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(v.a.Item,{label:"HCT ID",name:"id",children:Object(n.jsx)(w.a,{disabled:!0})}),Object(n.jsx)(v.a.Item,{label:"Name",name:"name",children:Object(n.jsx)(w.a,{disabled:!0})}),Object(n.jsx)(v.a.Item,{label:"Program",name:"program",children:Object(n.jsxs)(B.a,{defaultValue:"CIS",style:{width:120},children:[Object(n.jsx)(ae,{value:"CIS",children:"CIS"}),Object(n.jsx)(ae,{value:"ENG",children:"ENG"}),Object(n.jsx)(ae,{value:"BUS",children:"BUS"}),Object(n.jsx)("option",{value:"MEDIA",children:"Media"})]})}),Object(n.jsx)(v.a.Item,{label:"Major",name:"major",rules:[{required:!0}],children:Object(n.jsx)(w.a,{})}),Object(n.jsx)(v.a.Item,{label:"Number Phone",name:"numberPhone",rules:[{required:!0},{len:7,message:"Must be exactly 7 characters"},{pattern:/^\d+$/g,message:"Must be number"}],children:Object(n.jsx)(w.a,{addonBefore:Object(n.jsxs)(B.a,{defaultValue:"050",onChange:function(e){z(e)},className:"select-before",children:[Object(n.jsx)(ae,{value:"050",children:"050"}),Object(n.jsx)(ae,{value:"055",children:"055"}),Object(n.jsx)(ae,{value:"056",children:"056"})]})})}),Object(n.jsx)(v.a.Item,{label:"Sponsored",name:"sponsored",valuePropName:"checked",children:Object(n.jsx)(X.a,{children:"Yes"})})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(v.a.Item,{label:"Passport",name:"passport",rules:[{required:!0}],children:Object(n.jsxs)(ne,{multiple:!1,accept:"image/*",beforeUpload:function(){return!1},children:[Object(n.jsx)("p",{className:"ant-upload-drag-icon",children:Object(n.jsx)(Q.a,{})}),Object(n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),Object(n.jsx)(v.a.Item,{label:"Emirates ID",name:"emiratesId",rules:[{required:!0}],children:Object(n.jsxs)(ne,{multiple:!1,accept:"image/*",beforeUpload:function(){return!1},children:[Object(n.jsx)("p",{className:"ant-upload-drag-icon",children:Object(n.jsx)(Q.a,{})}),Object(n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})}),Object(n.jsx)(v.a.Item,{label:"Curriculum Vitae",name:"cv",rules:[{required:!0}],children:Object(n.jsxs)(ne,{accept:"image/*",multiple:!1,beforeUpload:function(){return!1},children:[Object(n.jsx)("p",{className:"ant-upload-drag-icon",children:Object(n.jsx)(Q.a,{})}),Object(n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})})]}),Object(n.jsx)("div",{children:Object(n.jsx)(v.a.List,{name:"companies",children:function(e,t){var a=t.add,r=t.remove;return Object(n.jsxs)(n.Fragment,{children:[e.map((function(e){return Object(n.jsxs)(I.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(n.jsx)(v.a.Item,Object(V.a)(Object(V.a)({},e),{},{label:"Comapny Name",name:[e.name,"comapnyName"],fieldKey:[e.fieldKey,"companyName"],rules:[{required:!0}],children:Object(n.jsx)(w.a,{})})),Object(n.jsx)(v.a.Item,Object(V.a)(Object(V.a)({},e),{},{label:"Email",name:[e.name,"email"],rules:[{required:!0},{type:"email"}],children:Object(n.jsx)(w.a,{})})),Object(n.jsx)(v.a.Item,Object(V.a)(Object(V.a)({},e),{},{label:"Contact Number",name:[e.name,"contactNumber"],rules:[{required:!0},{len:10,message:"Must be exactly 10 number"},{pattern:/^[050|056|055|058]\d+$/g,message:"Must start with [050|056|055|058] and then 7 numbers"}],fieldKey:[e.fieldKey,"Contact Number"],children:Object(n.jsx)(w.a,{})})),Object(n.jsx)(ee.a,{onClick:function(){return r(e.name)}})]},e.key)})),Object(n.jsx)(v.a.Item,{children:Object(n.jsx)(g.a,{type:"dashed",disabled:e.length>=2,onClick:function(){return a()},block:!0,icon:Object(n.jsx)(te.a,{}),children:"Add Company"})})]})}})}),Object(n.jsxs)("div",{children:[Object(n.jsx)(w.a.TextArea,{disabled:!0,value:"Student Consent Form Release of Information\nIn accordance with the provisions of HCT Policy LP231 regarding the confidentiality of student records, personal data may be released only under conditions applicable to the disclosure of student data to thir parties, which are:\n1. Disclosure to the student's legal guardian\n2. Statutory obligation of the HCT (e.g. to the Ministry of Higher Education and its associated agencies and the Ministry of Finance in cases of legitmate educational interest)\n3. The Student accepts the provisions of the policy and gives additional consent to the release of personal and academic information.\n3a. to other Ministries and Government institutions for the purpose of establishing contact in connection with employment opportunities (name, HCT ID number, HCT e-mail address and credential level and program will be supplied).\nI understand that HCT will not release information to a third party without my permission\nNote: Information required by law will be released without reference to the student consent."}),Object(n.jsx)(v.a.Item,{children:Object(n.jsx)(g.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})})},ce=a(412),se=(a(391),function(){var e=j(),t=x(),a=(t.user,t.loading),c=Object(r.useState)(null),s=Object(o.a)(c,2),i=s[0],l=s[1],d=Object(F.g)(),u=v.a.useForm(),b=Object(o.a)(u,1)[0],p=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.email,r=a.password,n+="@HCT.AC.AE",t.prev=2,t.next=5,e.auth().signInWithEmailAndPassword(n,r);case 5:l(null),b.resetFields(),d.replace({pathname:"/dashboard"}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),l(t.t0.message),b.resetFields();case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}();return a?Object(n.jsx)(T.a,{}):Object(n.jsxs)("div",{children:[i&&Object(n.jsx)(y.a,{message:i,type:"error"}),Object(n.jsxs)(v.a,{form:b,name:"normal_login",className:"login-form",onFinish:p,children:[Object(n.jsx)(v.a.Item,{name:"email",rules:[{required:!0,message:"Email is required"},{pattern:/^[\w.]+$/i,message:"Email is invalid"}],children:Object(n.jsx)(w.a,{prefix:Object(n.jsx)(P.a,{className:"site-form-item-icon"}),addonAfter:"@HCT.AC.AE",placeholder:"Email"})}),Object(n.jsx)(v.a.Item,{name:"password",rules:[{required:!0,message:"Password is required"},{min:6,message:"Password must be at least 6 characters"}],children:Object(n.jsx)(w.a.Password,{prefix:Object(n.jsx)(ce.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(n.jsx)(v.a.Item,{children:Object(n.jsx)(g.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"})})]}),Object(n.jsx)("a",{href:"/register",children:"Create an account"})]})}),ie=a(145);function oe(e){return e.charAt(0).toUpperCase()+e.slice(1)}var le=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(null),i=Object(o.a)(s,2),l=i[0],d=i[1],u=Object(F.g)(),j=function(){var e=Object(h.a)(m.a.mark((function e(t){var a,n,r,s,i,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.fname,r=t.lname,s=Object(Y.a)(t,["email","fname","lname"]),e.prev=1,d(!0),e.next=5,fetch("https://us-central1-capstone-a3162.cloudfunctions.net/api/users",{method:"POST",body:JSON.stringify(Object(V.a)(Object(V.a)({},s),{},{displayName:"".concat(oe(n)," ").concat(oe(r)),email:a+"@hct.ac.ae"}))});case 5:if((i=e.sent).ok){e.next=13;break}return e.next=9,i.json();case 9:throw o=e.sent,l=o.message,console.log(l),new Error(l);case 13:c(!0),d(!1),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),k.b.error(e.t0.message),d(!1);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return a?Object(n.jsx)("div",{children:Object(n.jsx)(W.a,{status:"success",title:"Last step",subTitle:"Sign in to your email to verify your account. While you're creating your account, you'll get an email from us. Open the email and find click the verification link. To finish creating your account",extra:[Object(n.jsx)(g.a,{onClick:function(){u.replace({pathname:"/"})},type:"primary",children:"Go to login page"},"console")]})}):Object(n.jsxs)(v.a,{name:"register",initialValues:{role:"teacher"},onFinish:j,children:[Object(n.jsx)(v.a.Item,{label:"First Name",name:"fname",rules:[{required:!0,message:"First Name is required"},{pattern:/^[a-zA-Z]+$/g,message:"Frist Name must be alphaphbet character only"}],children:Object(n.jsx)(w.a,{})}),Object(n.jsx)(v.a.Item,{label:"Last Name",name:"lname",rules:[{required:!0,message:"Last Name is required"},{pattern:/^[a-zA-Z]+$/g,message:"Last Name must be alphaphbet character only"}],children:Object(n.jsx)(w.a,{})}),Object(n.jsx)(v.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Email is required"},{pattern:/^[a-zA-Z-.]+$|^h00324601$/i,message:"Email is invalid"}],children:Object(n.jsx)(w.a,{addonAfter:"@HCT.AC.AE",placeholder:"Email"})}),Object(n.jsx)(v.a.Item,{label:"Password",name:"password",rules:[{min:6,message:"Password must be at least 6 characters"},{required:!0,message:"Password is required"}],children:Object(n.jsx)(w.a.Password,{})}),Object(n.jsx)(v.a.Item,{label:"Role",name:"role",children:Object(n.jsxs)(ie.a.Group,{children:[Object(n.jsx)(ie.a,{value:"teacher",children:"Teacher"}),Object(n.jsx)(ie.a,{value:"cd",children:"Career Department"})]})}),Object(n.jsx)(v.a.Item,{children:Object(n.jsx)(g.a,{type:"primary",htmlType:"submit",disabled:!!l,children:l?Object(n.jsx)(T.a,{}):"Submit"})})]})},de=a(101),ue=function(){return Object(n.jsx)(u,{children:Object(n.jsx)(O,{children:Object(n.jsx)(de.a,{children:Object(n.jsxs)(F.d,{children:[Object(n.jsx)(F.b,{path:"/dashboard",children:Object(n.jsx)(K,{})}),Object(n.jsx)(F.b,{path:"/register",children:Object(n.jsx)(le,{})}),Object(n.jsx)(F.b,{path:"/:code",children:Object(n.jsx)(re,{})}),Object(n.jsx)(F.b,{path:"/",children:Object(n.jsx)(se,{})})]})})})})},je=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,413)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(ue,{})}),document.getElementById("root")),je()}},[[392,1,2]]]);
//# sourceMappingURL=main.309b2d72.chunk.js.map